{% extends "base.html" %}
{% block title %}User Search — {{ block.super }}{% endblock %}
{% block content %}
  <section class="panel">
    <h2>User Search</h2>
    <form method="get" action="" class="kv" style="max-width:620px">
      <label for="q">Query</label>
      <input id="q" name="q" type="search" value="{{ q }}" placeholder="Username, e-mail, student ID or teacher ID" />
      <div></div>
      <button type="submit">Search</button>
    </form>
  </section>

  {% if q %}
  <section class="panel">
    <h3>Results for “{{ q }}”</h3>
    <ul>
      {% for u in results %}
        <li>
          <strong>{{ u.username }}</strong>
          {% if u.profile and u.profile.role %}<span class="muted">({{ u.profile.role }})</span>{% endif %}
          {% if u.profile and u.profile.role == 'student' and u.profile.student_number %}
            <span class="muted"> ({{ u.profile.student_number }})</span>
          {% elif u.profile and u.profile.role == 'teacher' and u.profile.instructor_id %}
            <span class="muted"> ({{ u.profile.instructor_id }})</span>
          {% endif %}
          {% if u.email %}<span class="muted"> — {{ u.email }}</span>{% endif %}
        </li>
      {% empty %}
        <li>No matching users.</li>
      {% endfor %}
    </ul>
  </section>
  {% endif %}
{% endblock %}
